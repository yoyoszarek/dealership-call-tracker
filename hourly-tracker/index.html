<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <!--
    Makes layout responsive on phones:
    - width=device-width: match device width
    - initial-scale=1.0: no zoom-in by default
  -->
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hourly Team Tracker</title>

  <!-- Main stylesheet for layout, colors, fonts, etc. -->
  <link rel="stylesheet" href="style.css"/>
</head>
<body>

  <!-- ===============================
       HEADER: App name + live date/time
       =============================== -->
  <header class="app-header">
    <div class="brand">
      <!-- Tiny logo emoji for quick visual branding -->
      <span class="logo">‚è≥</span>
      <!-- Main app title -->
      <h1>Hourly Team Tracker</h1>
    </div>

    <!-- Right side: current date + current time (filled by script.js) -->
    <div class="now-wrap">
      <!-- JS sets inner text to something like "Mon Nov 24 2025" -->
      <div id="nowDate" class="now-date"></div>
      <!-- JS sets inner text to something like "03:15 PM" -->
      <div id="nowHour" class="now-hour"></div>
    </div>
  </header>

  <!-- Main content wrapper (used to center and set max width) -->
  <main class="container">

    <!-- =======================================================
         METRIC CARDS
         - Three cards: Calls, Contacts, Appointments
         - Each uses data-* attributes for JS click handling
         ======================================================= -->
    <section class="stats-grid">
      <!--
        stats-grid uses CSS grid or flex to display three cards
        side-by-side on desktop and stacked on smaller screens.
      -->

      <!-- ===== Calls Counter Card ===== -->
      <article class="card">
        <div class="card-head">
          <!-- Icon is just visual, text is the actual label -->
          <span class="icon">üìû</span>
          <h2>Calls</h2>
        </div>

        <!-- Current hour's call count (script.js updates textContent) -->
        <div class="count" id="count-calls">0</div>

        <!-- Buttons are wired by JS via data-inc / data-dec / data-clr -->
        <div class="controls">
          <button data-inc="calls" class="btn primary">+1</button>
          <button data-dec="calls" class="btn ghost">‚àí1</button>
          <button data-clr="calls" class="btn warn small">reset</button>
        </div>
      </article>

      <!-- ===== Contacts Counter Card ===== -->
      <article class="card">
        <div class="card-head">
          <span class="icon">üë•</span>
          <h2>Contacts</h2>
        </div>

        <div class="count" id="count-contacts">0</div>

        <div class="controls">
          <button data-inc="contacts" class="btn primary">+1</button>
          <button data-dec="contacts" class="btn ghost">‚àí1</button>
          <button data-clr="contacts" class="btn warn small">reset</button>
        </div>
      </article>

      <!-- ===== Appointments Counter Card ===== -->
      <article class="card">
        <div class="card-head">
          <span class="icon">üìÖ</span>
          <h2>Appointments</h2>
        </div>

        <div class="count" id="count-appointments">0</div>

        <div class="controls">
          <!-- Both buttons increment the same "appointments" metric,
               labels are just to remind you which type you're logging. -->
          <button data-inc="appointments" class="btn primary">+1 Retail</button>
          <button data-inc="appointments" class="btn primary">+1 Buying</button>

          <button data-dec="appointments" class="btn ghost">‚àí1</button>
          <button data-clr="appointments" class="btn warn small">reset</button>
        </div>

        <!-- Small helper text under the card -->
        <small class="muted">Retail &amp; Buying both count toward total.</small>
      </article>
    </section>

    <!-- =======================================================
         TODAY'S HOURS PANEL
         - Stacked bar chart
         - Hourly table
         - Control buttons (CSV, Close Hour, Save Day, Clear All)
         ======================================================= -->
    <section class="panel">
      <div class="panel-head">
        <h3>Today&apos;s Hours</h3>

        <!-- Action buttons at top right of the panel -->
        <div class="actions">
          <!-- Export only today‚Äôs hourly breakdown as CSV -->
          <button id="exportCsv" class="btn small">Download Hourly CSV</button>
          <!-- Force-close current hour (useful if you end early) -->
          <button id="manualHourClose" class="btn small ghost">Close Hour Now</button>
          <!-- Save today‚Äôs totals into the history table -->
          <button id="addDayToHistory" class="btn small primary">Add Day to History</button>
          <!-- Nuke everything (hourly, notes, schedule, history) -->
          <button id="clearAll" class="btn small warn">Clear All</button>
        </div>
      </div>

      <!-- Stacked bar chart container (bars built with JS) -->
      <div id="chart" class="chart"></div>

      <!-- Collapsible table: shows hourly rows only when user wants detail -->
      <details class="table-wrap">
        <summary>Show hourly table</summary>

        <table id="dataTable">
          <thead>
            <tr>
              <th>Hour</th>
              <th>Calls</th>
              <th>Contacts</th>
              <th>Appointments</th>
              <th>Total</th>
            </tr>
          </thead>
          <!-- JS fills this <tbody> with one row per hour -->
          <tbody></tbody>
        </table>
      </details>
    </section>

    <!-- =======================================================
         TODAY'S SCHEDULE
         - Free text area per day
         - Autosaved to localStorage by date
         ======================================================= -->
    <section class="panel">
      <h3>Today&apos;s Schedule</h3>
      <!--
        script.js:
        - Reads from KEYS.SCHEDULE[today]
        - Writes back every second
      -->
      <textarea id="scheduleBox"
        placeholder="Ex: 9‚Äì10 standups, 10‚Äì12 outbound calls‚Ä¶">
      </textarea>
    </section>

    <!-- =======================================================
         TODAY'S NOTES
         - Free-form notes for the day
         - Autosaved similar to schedule
         ======================================================= -->
    <section class="panel">
      <h3>Today&apos;s Notes</h3>
      <!--
        script.js:
        - Reads from KEYS.NOTES[today]
        - Writes back every second
      -->
      <textarea id="notesBox"
        placeholder="Write anything you want for today‚Ä¶">
      </textarea>
    </section>

    <!-- =======================================================
         HISTORY (BY DAY)
         - Table of saved day summaries
         - CSV export
         - JSON backup / restore
         ======================================================= -->
    <section class="panel">
      <div class="panel-head">
        <h3>History (by Day)</h3>

        <div class="actions">
          <!-- Export entire history table as CSV -->
          <button id="exportHistoryCsv" class="btn small">Download History CSV</button>

          <!-- Download JSON backup of *all* data (hourly, notes, schedule, days) -->
          <button id="backupAll" class="btn small ghost">Backup (JSON)</button>

          <!-- Styled as a button, wired to the hidden file input below -->
          <label class="btn small ghost" for="restoreFile" style="cursor:pointer;">
            Restore (JSON)
          </label>
          <!-- Hidden file input; JS listens to "change" to restore backup -->
          <input id="restoreFile" type="file" accept="application/json" style="display:none;">
        </div>
      </div>

      <!-- Table with one row per saved day (date-level summary) -->
      <table id="historyTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Calls</th>
            <th>Contacts</th>
            <th>Appointments</th>
            <th>Total</th>
          </tr>
        </thead>
        <!-- script.js fills this with rows from KEYS.DAYS map -->
        <tbody></tbody>
      </table>

      <!--
        Expandable section showing notes & schedule
        for the last saved day in history.
      -->
      <details class="history-notes">
        <summary>Show last saved day&apos;s notes &amp; schedule</summary>

        <div class="history-box">
          <!-- Updated with something like "Saved Day: 2025-11-24" -->
          <h4 id="lastDayTitle" class="muted">No day saved yet</h4>

          <!-- Two columns: left = schedule, right = notes -->
          <div class="history-columns">
            <div>
              <h5>Schedule</h5>
              <!-- Preserves formatting and line breaks from saved schedule -->
              <pre id="lastSchedule"></pre>
            </div>

            <div>
              <h5>Notes</h5>
              <!-- Preserves formatting and line breaks from saved notes -->
              <pre id="lastNotes"></pre>
            </div>
          </div>
        </div>
      </details>
    </section>
  </main>

  <!-- Simple footer explaining storage behavior -->
  <footer class="app-footer">
    <small>Offline-ready. Data is saved with localStorage.</small>
  </footer>

  <!-- Your JS file: handles counters, hourly data, autosave, history, backup, etc. -->
  <script src="script.js"></script>
</body>
</html>
