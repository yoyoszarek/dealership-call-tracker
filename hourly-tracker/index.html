<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Hourly Team Tracker</title>

  <!-- Loads the main CSS file for global styling -->
  <link rel="stylesheet" href="style.css"/>
</head>
<body>

  <!-- ================================
       APP HEADER
       Shows app title + current date/hour
       ================================ -->
  <header class="app-header">
    <div class="brand">
      <span class="logo">‚è≥</span> <!-- Small icon for branding -->
      <h1>Hourly Team Tracker</h1> <!-- App title -->
    </div>

    <!-- Auto-updated date and time -->
    <div class="now-wrap">
      <div id="nowDate" class="now-date"></div> <!-- Filled by script.js -->
      <div id="nowHour" class="now-hour"></div> <!-- Filled by script.js -->
    </div>
  </header>

  <!-- Main layout wrapper -->
  <main class="container">

    <!-- ============================================================
         METRIC COUNTERS (Calls, Contacts, Appointments)
         Each section has: value display + +1, -1, reset buttons
         ============================================================ -->
    <section class="stats-grid">

      <!-- ----------------------
           CALLS COUNTER
           ---------------------- -->
      <article class="card">
        <div class="card-head">
          <span class="icon">üìû</span> <!-- Icon for visual clarity -->
          <h2>Calls</h2>
        </div>

        <!-- Current count displayed here -->
        <div class="count" id="count-calls">0</div>

        <!-- Control buttons tied to script.js bump() and resetMetric() -->
        <div class="controls">
          <button data-inc="calls" class="btn primary">+1</button>
          <button data-dec="calls" class="btn ghost">‚àí1</button>
          <button data-clr="calls" class="btn warn small">reset</button>
        </div>
      </article>

      <!-- ----------------------
           CONTACTS COUNTER
           ---------------------- -->
      <article class="card">
        <div class="card-head">
          <span class="icon">üë•</span>
          <h2>Contacts</h2>
        </div>
        <div class="count" id="count-contacts">0</div>
        <div class="controls">
          <button data-inc="contacts" class="btn primary">+1</button>
          <button data-dec="contacts" class="btn ghost">‚àí1</button>
          <button data-clr="contacts" class="btn warn small">reset</button>
        </div>
      </article>

      <!-- ----------------------
           APPOINTMENTS COUNTER
           Retail + Buying both increment same metric
           ---------------------- -->
      <article class="card">
        <div class="card-head">
          <span class="icon">üìÖ</span>
          <h2>Appointments</h2>
        </div>
        <div class="count" id="count-appointments">0</div>

        <div class="controls">
          <button data-inc="appointments" class="btn primary">+1 Retail</button>
          <button data-inc="appointments" class="btn primary">+1 Buying</button>
          <button data-dec="appointments" class="btn ghost">‚àí1</button>
          <button data-clr="appointments" class="btn warn small">reset</button>
        </div>

        <!-- Helper note for user understanding -->
        <small class="muted">
          Retail & Buying both count toward Appointments total.
        </small>
      </article>
    </section>

    <!-- ===========================================
         HOURLY BREAKDOWN SECTION
         Shows stacked bar chart + table summary
         =========================================== -->
    <section class="panel">
      <div class="panel-head">
        <h3>Today‚Äôs Hours</h3>

        <!-- Export, manual hour close, save to history, reset all -->
        <div class="actions">
          <button id="exportCsv" class="btn small">Download Hourly CSV</button>
          <button id="manualHourClose" class="btn small ghost">Close Hour Now</button>
          <button id="addDayToHistory" class="btn small primary">Add Day to History</button>
          <button id="clearAll" class="btn small warn">Clear All</button>
        </div>
      </div>

      <!-- Stacked bar chart (built from JS) -->
      <div id="chart" class="chart"></div>

      <!-- Click to toggle raw hourly data table -->
      <details class="table-wrap">
        <summary>Show hourly table</summary>
        <table id="dataTable">
          <thead>
            <tr>
              <th>Hour</th>
              <th>Calls</th>
              <th>Contacts</th>
              <th>Appointments</th>
              <th>Total</th>
            </tr>
          </thead>
          <tbody></tbody> <!-- Filled dynamically -->
        </table>
      </details>
    </section>

    <!-- ===========================================
         DAILY SCHEDULE TEXT AREA
         Saves automatically every second
         =========================================== -->
    <section class="panel">
      <h3>Today‚Äôs Schedule</h3>

      <!-- Simple text area saved to localStorage -->
      <textarea id="scheduleBox"
        placeholder="e.g., 9‚Äì10 Team standups, 10‚Äì12 outbound calls, 1‚Äì3 appointments‚Ä¶">
      </textarea>
    </section>

    <!-- ===========================================
         DAILY NOTES TEXT AREA
         Also saved every second
         =========================================== -->
    <section class="panel">
      <h3>Today‚Äôs Notes</h3>
      <textarea id="notesBox"
        placeholder="Write anything you want for today‚Ä¶">
      </textarea>
    </section>

    <!-- ===========================================
         HISTORY (BY SAVED DAY)
         Includes CSV export + backup/restore
         =========================================== -->
    <section class="panel">
      <div class="panel-head">
        <h3>History (by Day)</h3>

        <div class="actions">
          <!-- Export full history -->
          <button id="exportHistoryCsv" class="btn small">Download History CSV</button>

          <!-- Backup all localStorage data to JSON -->
          <button id="backupAll" class="btn small ghost">Backup (JSON)</button>

          <!-- File picker for restoring JSON backups -->
          <label class="btn small ghost" for="restoreFile" style="cursor:pointer;">
            Restore (JSON)
          </label>
          <input id="restoreFile" type="file" accept="application/json" style="display:none;">
        </div>
      </div>

      <!-- Table listing all saved days -->
      <table id="historyTable">
        <thead>
          <tr>
            <th>Date</th>
            <th>Calls</th>
            <th>Contacts</th>
            <th>Appointments</th>
            <th>Total</th>
          </tr>
        </thead>
        <tbody></tbody>
      </table>

      <!-- Expand to show last saved day's notes & schedule -->
      <details class="history-notes">
        <summary>Show last saved day‚Äôs notes & schedule</summary>

        <div class="history-box">
          <h4 id="lastDayTitle" class="muted">No day saved yet</h4>

          <div class="history-columns">
            <div>
              <h5>Schedule</h5>
              <pre id="lastSchedule"></pre> <!-- Filled from saved day -->
            </div>
            <div>
              <h5>Notes</h5>
              <pre id="lastNotes"></pre>
            </div>
          </div>
        </div>
      </details>
    </section>
  </main>

  <!-- Footer text -->
  <footer class="app-footer">
    <small>Offline-ready. Data is saved to this browser with localStorage.</small>
  </footer>

  <!-- Loads all interactive logic for this page -->
  <script src="script.js"></script>
</body>
</html>
